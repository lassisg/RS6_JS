<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- CSS only -->
        <link rel="stylesheet" href="/css/bootstrap.min.css" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css"
        />
        <link rel="stylesheet" href="/css/prism-coy.css" />
        <link rel="stylesheet" href="/css/js05_dom2accordion.css" />

        <!-- JavaScript Bundle with Popper -->
        <script src="/js/bootstrap.bundle.min.js"></script>
        <script src="/js/prism.js"></script>

        <title>Aula 05 | 2022-09-05 | DOM (2)</title>
    </head>
    <body>
        <header></header>

        <!-- <div class="container d-flex">
            <main class="d-flex flex-column"> -->
        <main>
            <div class="container-lg">
                <h1 class="display-4 text-primary">Aula 5 | DOM (2)</h1>

                <section class="acordeao">
                    <h2>Título 1 <span class="seta_aberta">&#8249;</span></h2>
                    <section>
                        Lorem ipsum, dolor sit amet consectetur adipisicing
                        elit. Neque facere corporis accusantium optio labore eum
                        praesentium quod explicabo voluptate quasi, ipsam quam
                        impedit minus magni in vitae autem est quia?
                    </section>
                    <h2>Título 2 <span class="seta_fechada">&#8249;</span></h2>
                    <section class="esconde">
                        <!-- <section> -->
                        Deserunt, illum. Illo aspernatur ducimus, dolor quae
                        ratione adipisci? Repudiandae eligendi, delectus earum
                        praesentium dolorem accusantium obcaecati unde vel
                        recusandae voluptate odit libero sit officia fugiat
                        totam ab repellendus ad.
                    </section>
                    <h2>Título 3 <span class="seta_fechada">&#8249;</span></h2>
                    <section class="esconde">
                        <!-- <section> -->
                        Facere accusamus est aliquid molestiae officiis illo
                        ipsa nihil reprehenderit! Rerum ab quam voluptatem!
                        Quasi quidem libero quisquam, eaque illum in similique
                        sapiente perspiciatis non exercitationem! Nam voluptates
                        voluptate enim.
                    </section>
                </section>

                <hr />

                <h3 class="display-6 text-primary">Código da aula</h3>

                <pre class="line-numbers">
                    <code class="language-javascript">
                        // Método antigo
                        // HTMLCollection(3)
                        // let titulos = document.getElementsByClassName("acordeao")[0].getElementsByTagName("h2");

                        // Método atual
                        // HTMLCollection(3)
                        let titulos = document.querySelectorAll(".acordeao > h2");

                        console.log(titulos);

                        let sections = document.querySelectorAll(".acordeao > section");

                        // Não é possível adiciona event listenner para array
                        // titulos.onclick = function(){
                        //     console.log("Clicou");
                        // };

                        for(let titulo of titulos){
                            titulo.addEventListener("click", function(){
                                let currentSection = this.nextElementSibling;
                                
                                // let estado = window.getComputedStyle(currentSection).getPropertyValue("display");
                                // if(estado === "none"){
                                //     currentSection.style.display = "block";
                                // }else{
                                //     currentSection.style.display = "none";
                                // }
                                // currentSection.style.display = estado === "none" ? "block" : "none";

                                currentSection.classList.toggle("esconde");
                                sections.forEach(section => {
                                    if(section !== currentSection){
                                        section.classList.add("esconde");
                                    }
                                });

                                for(let titulo of titulos){
                                    let estado = window.getComputedStyle(titulo.nextElementSibling).getPropertyValue("display");
                                    console.log(estado);
                                    console.log(titulo);

                                    if(estado === "none"){
                                        titulo.querySelector("span").classList.add("seta_fechada");
                                        titulo.querySelector("span").classList.remove("seta_aberta");
                                    } else {
                                        titulo.querySelector("span").classList.add("seta_aberta");
                                        titulo.querySelector("span").classList.remove("seta_fechada");
                                    }
                                }

                            });
                        }
                    </code>
                </pre>
            </div>
        </main>

        <footer></footer>

        <script src="/js/includes.js"></script>
        <script src="/js/js05_dom2.js"></script>
    </body>
</html>
