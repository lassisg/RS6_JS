<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- CSS only -->
        <link rel="stylesheet" href="/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/css/prism-coy.css" />

        <!-- JavaScript Bundle with Popper -->
        <script src="/js/bootstrap.bundle.min.js"></script>
        <script src="/js/prism.js"></script>

        <title>Exercício 13</title>
    </head>
    <body>
        <header
            class="container d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom"
        ></header>

        <div class="container">
            <main class="d-flex flex-column">
                <h1 class="display-4 text-primary">Exercício 13</h1>

                <p>
                    Criar uma função, <code>validaNome()</code>, que simule a
                    validação dos nomes de variáveis em JavaScript. Isto é, a
                    função recebe um parâmetro "nomeVariavel" e tem de
                    determinar se o nome da variável é autorizado.
                </p>

                <p>Regras:</p>

                <ul>
                    <li>
                        só pode conter letras (maiúsculas e minúsculas, excepto
                        os caracteres acentuados e o ç), algarismos, e os
                        caracteres $ e _
                    </li>
                    <li>não pode começar por um algarismo</li>
                    <li>
                        não pode ser uma palavra reservada de JavaScript -
                        break, case, catch, continue, debugger, default, delete,
                        do, else, finally, for, function, if, in, instanceof,
                        new, return, switch, this, throw, try, typeof, var,
                        void, while, with, class, const, enum, export, extends,
                        import, super, implements, interface, let, package,
                        private, protected, public, static, yield, true, false,
                        null, NaN, Infinity e undefined
                    </li>
                </ul>

                <hr />

                <h3 class="display-6 text-primary">Solução</h3>

                <pre class="line-numbers">
                    <code class="language-javascript">
                        function hasOnlyAllowedChar(nomeVariavel) {
                            // 48 - 57 | 65 - 90 | 97 - 122 | 95 | 36
                            for (let i = 0; i < nomeVariavel.length; i++) {
                                if (
                                    nomeVariavel.charCodeAt(i) !== 36 &&
                                    nomeVariavel.charCodeAt(i) !== 95 &&
                                    !(
                                        nomeVariavel.charCodeAt(i) >= 48 &&
                                        nomeVariavel.charCodeAt(i) <= 57
                                    ) &&
                                    !(
                                        nomeVariavel.charCodeAt(i) >= 65 &&
                                        nomeVariavel.charCodeAt(i) <= 122
                                    )
                                ) {
                                    return false;
                                }
                            }
                            return true;
                        }
            
                        function validaNome(nomeVariavel) {
                            let palavrasReservadas = [
                                "break",
                                "case",
                                "catch",
                                "continue",
                                "debugger",
                                "default",
                                "delete",
                                "do",
                                "else",
                                "finally",
                                "for",
                                "function",
                                "if",
                                "in",
                                "instanceof",
                                "new",
                                "return",
                                "switch",
                                "this",
                                "throw",
                                "try",
                                "typeof",
                                "var",
                                "void",
                                "while",
                                "with",
                                "class",
                                "const",
                                "enum",
                                "export",
                                "extends",
                                "import",
                                "super",
                                "implements",
                                "interface",
                                "let",
                                "package",
                                "private",
                                "protected",
                                "public",
                                "static",
                                "yield",
                                "true",
                                "false",
                                "null",
                                "NaN",
                                "Infinity",
                                "undefined",
                            ];
            
                            if (
                                nomeVariavel.charCodeAt(0) >= 48 &&
                                nomeVariavel.charCodeAt(0) <= 57
                            ) {
                                console.log(
                                    "Uma variável não pode começar por um algarismo."
                                );
                            } else if (palavrasReservadas.includes(nomeVariavel)) {
                                console.log(
                                    "Uma variável não pode ser uma palavra reservada de JavaScript."
                                );
                            } else if (!hasOnlyAllowedChar(nomeVariavel)) {
                                console.log(
                                    "A varável só pode conter letras (maiúsculas e minúsculas, excepto os caracteres acentuados e o ç), algarismos, e os caracteres $ e _"
                                );
                            } else {
                                console.log("A varável possui um nome permitido.");
                            }
                        }
            
                        validaNome("w+");
                    </code>
                </pre>
            </main>
        </div>

        <footer
            class="container d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top"
        ></footer>

        <script>
            function hasOnlyAllowedChar(nomeVariavel) {
                // 48 - 57 | 65 - 90 | 97 - 122 | 95 | 36
                for (let i = 0; i < nomeVariavel.length; i++) {
                    if (
                        nomeVariavel.charCodeAt(i) !== 36 &&
                        nomeVariavel.charCodeAt(i) !== 95 &&
                        !(
                            nomeVariavel.charCodeAt(i) >= 48 &&
                            nomeVariavel.charCodeAt(i) <= 57
                        ) &&
                        !(
                            nomeVariavel.charCodeAt(i) >= 65 &&
                            nomeVariavel.charCodeAt(i) <= 122
                        )
                    ) {
                        return false;
                    }
                }
                return true;
            }

            function validaNome(nomeVariavel) {
                let palavrasReservadas = [
                    "break",
                    "case",
                    "catch",
                    "continue",
                    "debugger",
                    "default",
                    "delete",
                    "do",
                    "else",
                    "finally",
                    "for",
                    "function",
                    "if",
                    "in",
                    "instanceof",
                    "new",
                    "return",
                    "switch",
                    "this",
                    "throw",
                    "try",
                    "typeof",
                    "var",
                    "void",
                    "while",
                    "with",
                    "class",
                    "const",
                    "enum",
                    "export",
                    "extends",
                    "import",
                    "super",
                    "implements",
                    "interface",
                    "let",
                    "package",
                    "private",
                    "protected",
                    "public",
                    "static",
                    "yield",
                    "true",
                    "false",
                    "null",
                    "NaN",
                    "Infinity",
                    "undefined",
                ];

                if (
                    nomeVariavel.charCodeAt(0) >= 48 &&
                    nomeVariavel.charCodeAt(0) <= 57
                ) {
                    console.log(
                        "Uma variável não pode começar por um algarismo."
                    );
                } else if (palavrasReservadas.includes(nomeVariavel)) {
                    console.log(
                        "Uma variável não pode ser uma palavra reservada de JavaScript."
                    );
                } else if (!hasOnlyAllowedChar(nomeVariavel)) {
                    console.log(
                        "A varável só pode conter letras (maiúsculas e minúsculas, excepto os caracteres acentuados e o ç), algarismos, e os caracteres $ e _"
                    );
                } else {
                    console.log("A varável possui um nome permitido.");
                }
            }

            validaNome("w+");
        </script>

        <script src="/js/includes.js"></script>
    </body>
</html>
